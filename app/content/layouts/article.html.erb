<% page = @page %>
<% set_meta_tags(
     title: page.title,
     description: page.description,
     keywords: %w[rails hotwire],
     og: {
       type: "article",
       url: page.request_path,
       image: page.meta_image && asset_url(page.meta_image)
     },
     twitter: {
       card: "summary"
     }
   ) %>
<%= render "application/skip_to_content" %>
<%= render_layout "application" do %>
  <article itemscope itemtype="http://schema.org/Article" class="mb-3xl">
    <%= render Pages::Header.new(
          title: page.title,
          description: page.description,
          published_on: page.published_on,
          updated_on: page.updated_on
        ) %>
    <div class="article-content container" itemprop="articleBody">
      <%= yield %>
    </div>
    <% if @page.topics.approved.any? %>
      <section id="article-topics" class="section-content container">
        <%= render Pages::Topics.new(topics: @page.topics.approved.pluck(:slug)) %>
      </section>
    <% end %>
  </article>
  <section id="newsletter-signup">
    <%= render "users/newsletter_subscriptions/banner" %>
  </section>
<% end %>

<% if page.enable_twitter_widgets %>
<%= javascript_include_tag "https://platform.twitter.com/widgets.js", charset: "utf-8", async: true %>
<% end %>
