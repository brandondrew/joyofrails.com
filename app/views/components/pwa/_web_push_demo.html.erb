<script>
</script>
<%= tag.div data: {
    controller: "pwa-web-push-demo",
    action: "pwa-web-push-subscription:subscription-changed->pwa-web-push-demo#onSubscriptionChanged pwa-web-push-subscription:subscription-error->pwa-web-push-demo#onError"
  },
  class: "not-prose" do %>
  <%= render "components/pwa/web_push_subscription" %>

  <p class="mt-6 mb-4">Try sending a web push notificaiton using the form below.</p>
  <%= form_for :web_push, url: pwa_web_pushes_path, data: {"pwa-web-push-demo-target": "sendDemoPushForm"} do |f| %>
    <%= f.hidden_field :subscription, data: { "pwa-web-push-demo-target": "subscriptionField" } %>
    <%= tag.fieldset class: "flex flex-wrap gap-2", data: { "pwa-web-push-demo-target": "sendPushDemoFieldset" }, disabled: true do %>
      <%= f.text_field :title, value: "Joy of Rails" %>
      <%= f.text_field :message, value: "Hello World" %>
      <%= button_tag "Send push notification to myself", class: "button primary" %>
    <% end %>
  <% end %>

  <div data-pwa-web-push-demo-target="error" class="bg-pink-300 text-pink-700 px-2 py-1 rounded-sm mt-8 hidden"></div>
<% end %>
